{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar serializr_1 = require(\"serializr\");\n\nvar types_1 = require(\"./types\"); // const demo = {\n//     title: true,\n//     name: {\n//         type: 'object',\n//         schema: {\n//             first: true,\n//             second: true,\n//             last: true\n//         }\n//     }\n// }\n\n\nfunction persistObject(target, schema) {\n  var model = createModel(schema);\n  serializr_1.setDefaultModelSchema(target, model);\n  return target;\n}\n\nexports.persistObject = persistObject;\n\nfunction createModel(params) {\n  var schema = {};\n  Object.keys(params).forEach(function (key) {\n    if (typeof params[key] === 'object') {\n      if (params[key].type in types_1.types) {\n        if (typeof params[key].schema === 'object') {\n          schema[key] = types_1.types[params[key].type](createModel(params[key].schema));\n        } else {\n          schema[key] = types_1.types[params[key].type](params[key].schema);\n        }\n      }\n    } else if (params[key] === true) {\n      schema[key] = true;\n    }\n  });\n  return serializr_1.createSimpleSchema(schema);\n}","map":null,"metadata":{},"sourceType":"script"}